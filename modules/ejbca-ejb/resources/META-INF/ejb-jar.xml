<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar version="3.0"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/ejb-jar_3_0.xsd"
    >

    <!--
        This file is required for mapping
        - the EjbcaDS DataSource JNDI name to "java:comp/env/DataSource" (@Resource injection using mappedName is appserver specific.)
        - Direct JDBC DataSource access is still required for
        	ExternalOCSPPublisher (via PublisherSessionBean and PublisherQueueSessionBean)
        	UpgradeSessionBean
        - CustomAvailableAccessRules
        - randomAlgorithm
        
        TODO:
        - Read values of "CustomAvailableAccessRules" and "randomAlgorithm" through Commons Configuration instead.
    -->

    <enterprise-beans>
        <session>
            <ejb-name>RSASignSessionBean</ejb-name>
            <ejb-class>org.ejbca.core.ejb.ca.sign.RSASignSessionBean</ejb-class>
            <env-entry>
                <env-entry-name>randomAlgorithm</env-entry-name>
                <env-entry-type>java.lang.String</env-entry-type>
                <env-entry-value>SHA1PRNG</env-entry-value>
            </env-entry>
        </session>
        <session>
            <ejb-name>AuthorizationSessionBean</ejb-name>
            <ejb-class>org.ejbca.core.ejb.authorization.AuthorizationSessionBean</ejb-class>
            <env-entry>
                <description>Custom Available Access Rules, use ';' to separate multiple accessrules></description>
                <env-entry-name>CustomAvailableAccessRules</env-entry-name>
                <env-entry-type>java.lang.String</env-entry-type>
                <env-entry-value><![CDATA[]]></env-entry-value>
            </env-entry>
        </session>
        <session>
            <ejb-name>UpgradeSessionBean</ejb-name>
            <ejb-class>org.ejbca.core.ejb.upgrade.UpgradeSessionBean</ejb-class>
            <env-entry>
                <env-entry-name>DataSource</env-entry-name>
                <env-entry-type>java.lang.String</env-entry-type>
                <env-entry-value><![CDATA[${datasource.jndi-name-prefix}${datasource.jndi-name}]]></env-entry-value>
            </env-entry>
        </session>
        <session>
            <ejb-name>PublisherQueueSessionBean</ejb-name>
            <ejb-class>org.ejbca.core.ejb.ca.publisher.PublisherQueueSessionBean</ejb-class>
            <env-entry>
                <env-entry-name>DataSource</env-entry-name>
                <env-entry-type>java.lang.String</env-entry-type>
                <env-entry-value><![CDATA[${datasource.jndi-name-prefix}${datasource.jndi-name}]]></env-entry-value>
            </env-entry>
        </session>
        <session>
            <ejb-name>PublisherSessionBean</ejb-name>
            <ejb-class>org.ejbca.core.ejb.ca.publisher.PublisherSessionBean</ejb-class>
            <env-entry>
                <env-entry-name>DataSource</env-entry-name>
                <env-entry-type>java.lang.String</env-entry-type>
                <env-entry-value><![CDATA[${datasource.jndi-name-prefix}${datasource.jndi-name}]]></env-entry-value>
            </env-entry>
        </session>
    </enterprise-beans>
</ejb-jar>
