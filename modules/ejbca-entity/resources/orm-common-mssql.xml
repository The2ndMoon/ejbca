<?xml version="1.0" encoding="UTF-8"?>
<!--
/*************************************************************************
 *                                                                       *
 *  EJBCA: The OpenSource Certificate Authority                          *
 *                                                                       *
 *  This software is free software; you can redistribute it and/or       *
 *  modify it under the terms of the GNU Lesser General Public           *
 *  License as published by the Free Software Foundation; either         *
 *  version 2.1 of the License, or any later version.                    *
 *                                                                       *
 *  See terms of license at gnu.org.                                     *
 *                                                                       *
 *************************************************************************/

 version: $Id$
 -->
<entity-mappings version="1.0"
    xmlns="http://java.sun.com/xml/ns/persistence/orm"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm http://java.sun.com/xml/ns/persistence/orm_1_0.xsd">

    <!--
        Common ORM file for both EJBCA and the External VA build.
        See orm-ejbca-${database.name}.xml for database specific comments before making changes to this file!
    -->

    <entity class="org.cesecore.certificates.certificate.CertificateData" access="PROPERTY" metadata-complete="false">
        <attributes>
            <id name="fingerprint"><column name="fingerprint" column-definition="VARCHAR(256)"/></id>
            <basic fetch="EAGER" name="issuerDN"><column name="issuerDN" column-definition="VARCHAR(256)" nullable="false"/></basic>
            <basic fetch="EAGER" name="subjectDN"><column name="subjectDN" column-definition="VARCHAR(256)" nullable="false"/></basic>
            <basic fetch="EAGER" name="caFingerprint"><column name="cAFingerprint" column-definition="VARCHAR(256)"/></basic>
            <basic fetch="EAGER" name="status"><column name="status" column-definition="INTEGER" nullable="false"/></basic>
            <basic fetch="EAGER" name="type"><column name="type" column-definition="INTEGER" nullable="false"/></basic>
            <basic fetch="EAGER" name="serialNumber"><column name="serialNumber" column-definition="VARCHAR(256)" nullable="false"/></basic>
            <basic fetch="EAGER" name="expireDate"><column name="expireDate" column-definition="BIGINT" nullable="false"/></basic>
            <basic fetch="EAGER" name="revocationDate"><column name="revocationDate" column-definition="BIGINT" nullable="false"/></basic>
            <basic fetch="EAGER" name="revocationReason"><column name="revocationReason" column-definition="INTEGER" nullable="false"/></basic>
            <!-- We need to allow this field to be null in external OCSP responder mode and it's easier if the tables look the same! -->
            <basic fetch="EAGER" name="base64Cert"><column name="base64Cert" column-definition="TEXT"/><lob/></basic>
            <basic fetch="EAGER" name="username"><column name="username" column-definition="VARCHAR(256)"/></basic>
            <basic fetch="EAGER" name="tag"><column name="tag" column-definition="VARCHAR(256)"/></basic>
            <basic fetch="EAGER" name="certificateProfileId"><column name="certificateProfileId" column-definition="INTEGER" nullable="false"/></basic>
            <basic fetch="EAGER" name="updateTime"><column name="updateTime" column-definition="BIGINT" nullable="false"/></basic>
            <basic fetch="EAGER" name="subjectKeyId"><column name="subjectKeyId" column-definition="VARCHAR(256)"/></basic>
            <basic fetch="EAGER" name="rowProtection"><column name="rowProtection" column-definition="TEXT"/><lob/></basic>
            <version name="rowVersion"><column name="rowVersion" column-definition="INTEGER" nullable="false"/></version>
        </attributes>
    </entity>
    <entity class="org.cesecore.certificates.crl.CRLData" access="PROPERTY" metadata-complete="false">
        <attributes>
            <id name="fingerprint"><column name="fingerprint" column-definition="VARCHAR(256)"/></id>
            <basic fetch="EAGER" name="crlNumber"><column name="cRLNumber" column-definition="INTEGER" nullable="false"/></basic>
            <basic fetch="EAGER" name="issuerDN"><column name="issuerDN" column-definition="VARCHAR(256)" nullable="false"/></basic>
            <basic fetch="EAGER" name="caFingerprint"><column name="cAFingerprint" column-definition="VARCHAR(256)" nullable="false"/></basic>
            <basic fetch="EAGER" name="thisUpdate"><column name="thisUpdate" column-definition="BIGINT" nullable="false"/></basic>
            <basic fetch="EAGER" name="nextUpdate"><column name="nextUpdate" column-definition="BIGINT" nullable="false"/></basic>
            <basic fetch="EAGER" name="deltaCRLIndicator"><column name="deltaCRLIndicator" column-definition="INTEGER" nullable="false"/></basic>
            <basic fetch="EAGER" name="base64Crl"><column name="base64Crl" column-definition="TEXT" nullable="false"/><lob/></basic>
            <basic fetch="EAGER" name="rowProtection"><column name="rowProtection" column-definition="TEXT"/><lob/></basic>
            <version name="rowVersion"><column name="rowVersion" column-definition="INTEGER" nullable="false"/></version>
        </attributes>
    </entity>

</entity-mappings>
